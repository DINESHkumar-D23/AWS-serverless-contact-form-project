<!DOCTYPE html>
<html>
<head>
  <title>Stephane</title>
</head>
<body>
  <h1>Serverless Webinar: Stephane</h1>

  <div>
    <form id="contact-form" action="" method="post">
      <div class="section-title">
        <h2>Contact us <small>we love conversations. Let us talk!</small></h2>
      </div>

      <div>
        <input type="text" id="name-input" placeholder="Enter full name" name="name" required="">
        <br>
        <input type="email" id="email-input" placeholder="Enter email address" name="email" required="">
        <br>
        <textarea id="message-input" rows="6" placeholder="Tell us about your message" name="message" required=""></textarea>
        <br>
      </div>

      <div>
        <input type="submit" onClick="submitToAPI(event)" value="Send Message">
      </div>
    </form>
  </div>

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
  <script>
    function submitToAPI(e) {
      e.preventDefault();
      var URL = "https://hm5w6buxi3.execute-api.ap-south-1.amazonaws.com/prod/contact";  

      var name = $("#name-input").val();
      var email = $("#email-input").val();
      var message = $("#message-input").val();

      if (!name || !email || !message) {
        alert("Please fill all fields");
        return;
      }

      var data = {
        name: name,
        email: email,
        message: message
      };

      $.ajax({
        type: "POST",
        url: URL,
        dataType: "json",
        crossDomain: true,
        contentType: "application/json",
        data: JSON.stringify(data),
        success: function () {
          alert("Form submitted successfully!");
          document.getElementById("contact-form").reset();
        },
        error: function (xhr, status, error) {
          console.error("Error:", error, xhr.responseText);
          alert("Error submitting form");
        }
      });
    }
  </script>
</body>
</html>
